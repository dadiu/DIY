<!DOCTYPE html>
<html lang="en">

<head>
    <title>test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>

    <script>
        (function () {

            /**
             * 比较轴向
             * @param {String} compareDirection 
             * @param {Number} fixNum 
             * @param {Number} isStep 
             * @param {Function} cb 
             */
            function _compareFn(compareDirection, fixNum, isStep, cb) {

                let isEnd = true;

                if (compareDirection === 'x') {
                    let ROOF_X = POINT_A.x - POINT_B.x > 0 ? POINT_A.x : POINT_B.x;
                    let BASE_X = POINT_A.x - POINT_B.x > 0 ? POINT_B.x : POINT_A.x;

                    if (isStep === 1) {
                        BASE_X++;
                    }

                    for (; BASE_X < ROOF_X; BASE_X++) {
                        if (CODEARR[BASE_X][fixNum] !== null) {
                            console.log("x is err");
                            isEnd = false;
                            break;
                        }
                    }
                };

                if (compareDirection === 'y') {
                    let ROOF_Y = POINT_A.y - POINT_B.y > 0 ? POINT_A.y : POINT_B.y;
                    let BASE_Y = POINT_A.y - POINT_B.y > 0 ? POINT_B.y : POINT_A.y;

                    if (isStep === 1) {
                        BASE_Y++;
                    }

                    for (; BASE_Y < ROOF_Y; BASE_Y++) {
                        if (CODEARR[fixNum][BASE_Y] !== null) {
                            console.log("y is err");
                            isEnd = false;
                            break;
                        }
                    };
                };

                cb & cb(isEnd);
            };


            // start

            let _t = this;
            let _status = true;

            // X轴
            _compareFn('x', POINT_A.y, 1, function (res) {
                if (res) {
                    // Y轴
                    _compareFn("y", POINT_B.x, 2, function (item) {
                        if (item) {
                            _status = !item;
                            _t.picStatusFn('remove');
                        }
                    })
                }

            });

            // Y轴
            if (_status) {
                _compareFn('y', POINT_A.x, 1, function (res) {
                    if (res) {
                        // X轴
                        _compareFn("x", POINT_B.y, 2, function (item) {
                            if (item) {
                                _status = !item;
                                _t.picStatusFn('remove');
                            }
                        })
                    }

                });

            }


            console.log('>>> isStep_1  ...   _status : ' + _status);
            return _status;
        }())
    </script>

    <script>
    (function(){
        
        let _t = this;
            let isEnd = true;

            // Y轴相等
            if (POINT_A.y === POINT_B.y) {

                // 相邻
                if (Math.abs(POINT_A.x - POINT_B.x) === 1) {
                    this.picStatusFn('remove');
                    return false;
                };

                let ROOF_X = POINT_A.x - POINT_B.x > 0 ? POINT_A.x : POINT_B.x;
                let BASE_X = POINT_A.x - POINT_B.x > 0 ? POINT_B.x : POINT_A.x;

                BASE_X++;

                for (; BASE_X < ROOF_X; BASE_X++) {

                    if (CODEARR[BASE_X][POINT_A.y] !== null) {
                        console.log("x is err");
                        isEnd = false;
                        break;
                    }
                };

            };

            // X轴相等
            if (POINT_A.x === POINT_B.x) {

                // 相邻
                if (Math.abs(POINT_A.y - POINT_B.y) === 1) {
                    this.picStatusFn('remove');
                    return false;
                };

                let ROOF_Y = POINT_A.y - POINT_B.y > 0 ? POINT_A.y : POINT_B.y;
                let BASE_Y = POINT_A.y - POINT_B.y > 0 ? POINT_B.y : POINT_A.y;

                BASE_Y++;

                for (; BASE_Y < ROOF_Y; BASE_Y++) {
                    if (CODEARR[POINT_A.x][BASE_Y] !== null) {
                        console.log("y is err");
                        isEnd = false;
                        break;
                    }
                };

            };

            if (isEnd && (POINT_A.y === POINT_B.y || POINT_A.x === POINT_B.x)){
                this.picStatusFn('remove');
                return false;
            }

            console.log('>>> isStep_0  ...   _status : ' + isEnd);
            return true;

    }())
    </script>
</body>

</html>